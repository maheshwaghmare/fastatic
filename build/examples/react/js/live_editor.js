"use strict";var _jsxFileName="_js/live_editor.js",IS_MOBILE=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),CodeMirrorEditor=React.createClass({displayName:"CodeMirrorEditor",propTypes:{lineNumbers:React.PropTypes.bool,onChange:React.PropTypes.func},getDefaultProps:function(){return{lineNumbers:!1}},componentDidMount:function(){IS_MOBILE||(this.editor=CodeMirror.fromTextArea(ReactDOM.findDOMNode(this.refs.editor),{mode:"jsx",lineNumbers:this.props.lineNumbers,lineWrapping:!0,smartIndent:!1,matchBrackets:!0,theme:"solarized-light",readOnly:this.props.readOnly}),this.editor.on("change",this.handleChange))},componentDidUpdate:function(){this.props.readOnly&&this.editor.setValue(this.props.codeText)},handleChange:function(){this.props.readOnly||this.props.onChange&&this.props.onChange(this.editor.getValue())},render:function(){var e;return e=IS_MOBILE?React.createElement("pre",{style:{overflow:"scroll"},__source:{fileName:_jsxFileName,lineNumber:53}},this.props.codeText):React.createElement("textarea",{ref:"editor",defaultValue:this.props.codeText,__source:{fileName:_jsxFileName,lineNumber:55}}),React.createElement("div",{style:this.props.style,className:this.props.className,__source:{fileName:_jsxFileName,lineNumber:59}},e)}}),selfCleaningTimeout={componentDidUpdate:function(){clearTimeout(this.timeoutID)},setTimeout:function(){clearTimeout(this.timeoutID),this.timeoutID=setTimeout.apply(null,arguments)}},ReactPlayground=React.createClass({displayName:"ReactPlayground",mixins:[selfCleaningTimeout],MODES:{JSX:"JSX",JS:"JS"},propTypes:{codeText:React.PropTypes.string.isRequired,transformer:React.PropTypes.func,renderCode:React.PropTypes.bool,showCompiledJSTab:React.PropTypes.bool,showLineNumbers:React.PropTypes.bool,editorTabTitle:React.PropTypes.string},getDefaultProps:function(){return{transformer:function(e){return babel.transform(e).code},editorTabTitle:"Live JSX Editor",showCompiledJSTab:!0,showLineNumbers:!1}},getInitialState:function(){return{mode:this.MODES.JSX,code:this.props.codeText}},handleCodeChange:function(e){this.setState({code:e}),this.executeCode()},handleCodeModeSwitch:function(e){this.setState({mode:e})},compileCode:function(){return this.props.transformer(this.state.code)},render:function(){var e=this.state.mode===this.MODES.JS,t="";try{t=this.compileCode()}catch(e){}var o=React.createElement(CodeMirrorEditor,{key:"js",className:"playgroundStage CodeMirror-readonly",onChange:this.handleCodeChange,codeText:t,readOnly:!0,lineNumbers:this.props.showLineNumbers,__source:{fileName:_jsxFileName,lineNumber:130}}),r=React.createElement(CodeMirrorEditor,{key:"jsx",onChange:this.handleCodeChange,className:"playgroundStage",codeText:this.state.code,lineNumbers:this.props.showLineNumbers,__source:{fileName:_jsxFileName,lineNumber:140}}),i="playground-tab"+(e?"":" playground-tab-active"),a="playground-tab"+(e?" playground-tab-active":""),s=React.createElement("div",{className:a,onClick:this.handleCodeModeSwitch.bind(this,this.MODES.JS),__source:{fileName:_jsxFileName,lineNumber:154}},"Compiled JS"),n=React.createElement("div",{className:i,onClick:this.handleCodeModeSwitch.bind(this,this.MODES.JSX),__source:{fileName:_jsxFileName,lineNumber:161}},this.props.editorTabTitle);return React.createElement("div",{className:"playground",__source:{fileName:_jsxFileName,lineNumber:168}},React.createElement("div",{__source:{fileName:_jsxFileName,lineNumber:169}},n,this.props.showCompiledJSTab&&s),React.createElement("div",{className:"playgroundCode",__source:{fileName:_jsxFileName,lineNumber:173}},e?o:r),React.createElement("div",{className:"playgroundPreview",__source:{fileName:_jsxFileName,lineNumber:176}},React.createElement("div",{ref:"mount",__source:{fileName:_jsxFileName,lineNumber:177}})))},componentDidMount:function(){this.executeCode()},componentDidUpdate:function(e,t){this.props.transformer===e.transformer&&this.state.code===t.code||this.executeCode()},executeCode:function(){var mountNode=ReactDOM.findDOMNode(this.refs.mount);try{ReactDOM.unmountComponentAtNode(mountNode)}catch(e){}try{var compiledCode=this.compileCode();this.props.renderCode?ReactDOM.render(React.createElement(CodeMirrorEditor,{codeText:compiledCode,readOnly:!0,__source:{fileName:_jsxFileName,lineNumber:207}}),mountNode):eval(compiledCode)}catch(e){this.setTimeout(function(){ReactDOM.render(React.createElement("div",{className:"playgroundError",__source:{fileName:_jsxFileName,lineNumber:216}},e.toString()),mountNode)},500)}}});